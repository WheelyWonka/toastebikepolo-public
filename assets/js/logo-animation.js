document.addEventListener("DOMContentLoaded",async()=>{try{const r=await fetch("/assets/graphics/logo.svg"),s=await r.text();document.querySelector(".logo-container").innerHTML=s;const i=document.querySelector("#eye-left"),c=document.querySelector("#eye-right"),l=document.querySelector("#eye-container-left"),d=document.querySelector("#eye-container-right"),m=document.querySelector("svg");let u=null,h=null;function t(){u=m.getBoundingClientRect(),h=u.width/m.viewBox.baseVal.width}function e(e,n,o,a){const r=function(e){u&&h||t();const n=e.getBBox();return{left:u.left+n.x*h,top:u.top+n.y*h,width:n.width*h,height:n.height*h,centerX:u.left+(n.x+n.width/2)*h,centerY:u.top+(n.y+n.height/2)*h}}(n),s=o-r.centerX,i=a-r.centerY,c=Math.atan2(i,s),l=.35*Math.min(r.width,r.height),d=Math.min(Math.hypot(s,i),l),m=Math.cos(c)*d,y=Math.sin(c)*d;e.style.willChange="transform",e.style.transform=`translate3d(${m}px, ${y}px, 0)`}function n(n){t(),requestAnimationFrame(()=>{e(i,l,n.clientX,n.clientY),e(c,d,n.clientX,n.clientY)})}function o(){if(!document.getElementById("model-container"))return;!function(){try{const t=Math.floor(3*Math.random())+1,e=new Audio(`/assets/sounds/hit-0${t}.mp3`);e.volume=.5,e.playbackRate=.95+.1*Math.random(),e.play().catch(()=>{})}catch{}}();const t=function(t){const e=t.getBoundingClientRect();return{x:e.left+e.width/2,y:e.top+e.height/2,width:e.width,height:e.height}}(document.querySelector(".logo-container")),e={x:t.x,y:t.y},n=Math.random()<.5?-1:1,o=260+240*Math.random(),a={x:e.x+n*o,y:window.innerHeight+160+160*Math.random()},r=document.createElement("img");r.src="/assets/graphics/toast.svg",r.alt="toast",r.style.position="fixed",r.style.left="-28px",r.style.top="-43px",r.style.width="56px",r.style.height="56px",r.style.transform=`translate3d(${e.x}px, ${e.y}px, 0) rotate(0deg)`,r.style.willChange="transform, opacity",r.style.pointerEvents="none",r.style.zIndex="10",document.body.appendChild(r);const s=Math.max(420,.8*Math.abs(a.x-e.x)),i=60*(2*Math.random()-1),c={x:(e.x+a.x)/2+i,y:Math.min(e.y,a.y)-s},l=1600+800*Math.random(),d=performance.now(),m=360*(2*Math.random()-1);requestAnimationFrame(function t(){const n=performance.now(),o=Math.min(1,(n-d)/l),s=function(t){return 1-Math.pow(1-t,3)}(o),i=function(t,e,n,o){const a=1-o;return{x:a*a*t.x+2*a*o*e.x+o*o*n.x,y:a*a*t.y+2*a*o*e.y+o*o*n.y}}(e,c,a,s),u=m*s;r.style.transform=`translate3d(${i.x}px, ${i.y}px, 0) rotate(${u}deg)`;const h=1+.05*Math.sin(s*Math.PI);r.style.transform+=` scale(${h})`,r.style.opacity=String(1-.1*s),o<1?requestAnimationFrame(t):r.remove()})}document.addEventListener("mousemove",n),document.addEventListener("touchstart",t=>{const e=t.touches[0];n({clientX:e.clientX,clientY:e.clientY})},{passive:!0}),document.addEventListener("touchmove",t=>{const e=t.touches[0];n({clientX:e.clientX,clientY:e.clientY})},{passive:!0});const y=document.querySelector(".logo-container");function a(){const t=document.querySelector("#eyes-opened"),e=document.querySelector("#eyes-closed");t&&e&&(t.style.display="none",e.style.display="block",setTimeout(()=>{t.style.display="block",e.style.display="none"},150))}y&&(y.addEventListener("mousedown",t=>{o(),a()}),y.addEventListener("touchstart",t=>{o(),a()},{passive:!0})),setTimeout(function(){const t=document.querySelector("#toaster");if(!t)return;t.style.transformOrigin="center center",t.style.transition="transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)";let e=!1,n=!1,o=null,a=!1;const r=["shake","vibrate","wiggle"],s=document.querySelector(".logo-container");function i(){e=!0,console.log("Logo area hovered - pausing random movements")}function c(){e=!1,console.log("Logo area unhovered - resuming random movements"),a||l()}function l(){if(e||n||a)return;const s=2e3+4e3*Math.random();o=setTimeout(()=>{if(e||n||a)return;const o=r[Math.floor(Math.random()*r.length)];switch(a=!0,o){case"jump":!function(){const n=6+3*Math.random(),o=4*(Math.random()-.5),a=6*(Math.random()-.5);t.style.transform=`translate(${o}px, -${n}px) rotate(${a}deg)`,setTimeout(()=>{if(!e){const r=.3*a;t.style.transform=`translate(${.7*o}px, -${.2*n}px) rotate(${r}deg)`,setTimeout(()=>{e||(t.style.transform="translate(0px, 0px) rotate(0deg)")},150)}},250)}();break;case"slide":!function(){const n=8*(Math.random()-.5),o=2*(Math.random()-.5);t.style.transform=`translate(${n}px, 0px) rotate(${o}deg)`,setTimeout(()=>{e||(t.style.transform="translate(0px, 0px) rotate(0deg)")},400)}();break;case"shake":!function(){const n=2+2*Math.random();let o=0;const a=4+Math.floor(3*Math.random());function r(){if(o>=a||e)return void(e||(t.style.transform="translate(0px, 0px) rotate(0deg)"));const s=(Math.random()-.5)*n,i=(Math.random()-.5)*(.3*n),c=1*(Math.random()-.5);t.style.transform=`translate(${s}px, ${i}px) rotate(${c}deg)`,o++,setTimeout(r,80+40*Math.random())}r()}();break;case"vibrate":!function(){const n=1+1.5*Math.random();let o=0;const a=6+Math.floor(4*Math.random());function r(){if(o>=a||e)return void(e||(t.style.transform="translate(0px, 0px) rotate(0deg)"));const s=(Math.random()-.5)*n,i=(Math.random()-.5)*n,c=.5*(Math.random()-.5);t.style.transform=`translate(${s}px, ${i}px) rotate(${c}deg)`,o++,setTimeout(r,60+30*Math.random())}r()}();break;case"wiggle":!function(){const n=1.5+1*Math.random(),o=4*(Math.random()-.5);let a=0;const r=3+Math.floor(2*Math.random());function s(){if(a>=r||e)return void(e||(t.style.transform="translate(0px, 0px) rotate(0deg)"));const i=(Math.random()-.5)*n,c=(Math.random()-.5)*(.5*n),l=o*(a%2==0?1:-1);t.style.transform=`translate(${i}px, ${c}px) rotate(${l}deg)`,a++,setTimeout(s,120+60*Math.random())}s()}()}setTimeout(()=>{a=!1,l()},1e3)},s)}t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",c),s&&(s.addEventListener("mouseenter",i),s.addEventListener("mouseleave",c)),window.toasterMovementControl={startClickWindow:()=>{n=!0,console.log("Click window started - pausing toaster movements")},endClickWindow:()=>{n=!1,console.log("Click window ended - resuming toaster movements"),a||e||l()}},l()},2e3)}catch(f){console.error("Error loading SVG:",f)}});